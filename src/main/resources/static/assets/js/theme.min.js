const toggleSwitch=document.querySelector('.theme-switch input[type="checkbox"]'),currentTheme=localStorage.getItem("theme");function switchTheme(e){e.target.checked?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark")):(document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light"))}currentTheme&&(document.documentElement.setAttribute("data-theme",currentTheme),"light"===currentTheme&&null!=toggleSwitch&&(toggleSwitch.checked=!0)),null!=toggleSwitch&&toggleSwitch.addEventListener("change",switchTheme,!1);
function naiveSearch(e,t){return e.toLowerCase().includes(t.toLowerCase())}function setCookie(e,t,o){var n="";if(o){var a=new Date;a.setTime(a.getTime()+24*o*60*60*1e3),n="; expires="+a.toUTCString()}document.cookie=e+"="+(t||"")+n+"; path=/"}function getCookie(e){for(var t=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var a=o[n];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return null}function setCurrentLocale(e){setCookie("Locale",e.toLowerCase(),30),location.reload()}!function(){if($(".dropdown-menu a.dropdown-toggle").length&&$(".dropdown-menu a.dropdown-toggle").on("click",(function(e){return $(this).next().hasClass("show")||$(this).parents(".dropdown-menu").first().find(".show").removeClass("show"),$(this).next(".dropdown-menu").toggleClass("show"),$(this).parents("li.nav-item.dropdown.show").on("hidden.bs.dropdown",(function(e){$(".dropdown-submenu .show").removeClass("show")})),!1})),$('[data-bs-toggle="tooltip"]').length)[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map((function(e){return new bootstrap.Tooltip(e)}));if($('[data-bs-toggle="popover"]').length)[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]')).map((function(e){return new bootstrap.Popover(e)}));if($("#cardRadioone , #cardRadioTwo").length&&($("#internetpayment").hide(),$("#cardRadioone").on("change",(function(){this.checked&&($("#cardpayment").show(),$("#internetpayment").hide())})),$("#cardRadioTwo").on("change",(function(){this.checked&&($("#internetpayment").show(),$("#cardpayment").hide())}))),$(".password-field input").length){function e(e){var t=0;return e.length>=6&&(t+=1),e.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(t+=1),e.match(/([a-zA-Z])/)&&e.match(/([0-9])/)&&(t+=1),t}$(".password-field input").on("keyup",(function(){var t=e($(this).val()),o=$(this).parent(".password-field");o.removeClass((function(e,t){return(t.match(/\level\S+/g)||[]).join(" ")})),o.addClass("level"+t)}))}if($('[data-upload-id="courseImage"]').length){new FileUploadWithPreview.FileUploadWithPreview("courseImage")}if($("#nav-toggle").length&&$("#nav-toggle").on("click",(function(e){e.preventDefault(),$("#db-wrapper").toggleClass("toggled")})),$("#invoice").length&&$("#invoice").find(".print-link").on("click",(function(){$.print("#invoice")})),$(".sidebar-nav-fixed a").length&&$(".sidebar-nav-fixed a").on("click",(function(e){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=$(this.hash);(t=t.length?t:$("[name="+this.hash.slice(1)+"]")).length&&(e.preventDefault(),$("html, body").animate({scrollTop:t.offset().top-90},1e3,(function(){var e=$(t);if(e.focus(),e.is(":focus"))return!1;e.attr("tabindex","-1"),e.focus()})))}$(".sidebar-nav-fixed a").each((function(){$(this).removeClass("active")})),$(this).addClass("active")})),$("#checkAll").length&&$("#checkAll").on("click",(function(){$("input:checkbox").not(this).prop("checked",this.checked)})),$("#btn-icon").length&&$(".btn-icon").on("click",(function(){$(this).parent().addClass("active").siblings().removeClass("active")})),$(".stopevent").length&&$(document).on("click.bs.dropdown.data-api",".stopevent",(function(e){e.stopPropagation()})),$("input[name=tags]").length){var t=document.querySelector("input[name=tags]");new Tagify(t)}if($(".tagifyInput").each((function(e,t){new Tagify(t)})),$(".headingTyped").length){const U=$(".typedTextContent").text().split(", ");console.log(U);new Typed(".headingTyped",{strings:U,typeSpeed:30,backSpeed:30,backDelay:2e3,loop:!0})}if($(".needs-validation").length){var o=document.querySelectorAll(".needs-validation");Array.prototype.slice.call(o).forEach((function(e){e.addEventListener("submit",(function(t){e.checkValidity()||(t.preventDefault(),t.stopPropagation()),e.classList.add("was-validated")}),!1)}))}if($(".toast").length)[].slice.call(document.querySelectorAll(".toast")).map((function(e){return new bootstrap.Toast(e)}));if($(".offcanvas").length)[].slice.call(document.querySelectorAll(".offcanvas")).map((function(e){return new bootstrap.Offcanvas(e)}));if($(".dropdown-toggle").length)[].slice.call(document.querySelectorAll(".dropdown-toggle")).map((function(e){return new bootstrap.Dropdown(e)}));if($("#dataTableBasic").length&&$(document).ready((function(){$("#dataTableBasic").DataTable({responsive:!0})})),$("#liveAlertPlaceholder").length){var n=document.getElementById("liveAlertPlaceholder"),a=document.getElementById("liveAlertBtn");a&&a.addEventListener("click",(function(){var e,t,o;e="Nice, you triggered this alert message!",t="success",(o=document.createElement("div")).innerHTML='<div class="alert alert-'+t+' alert-dismissible" role="alert">'+e+'<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button></div>',n.append(o)}))}if($("#typed").length)new Typed("#typed",{stringsElement:"#typed-strings",typeSpeed:40,backSpeed:40,backDelay:1e3,loop:!0});if($("#slider").length){var i=document.getElementById("slider");noUiSlider.create(i,{start:[32],connect:[!0,!1],range:{min:0,max:60},tooltips:[wNumb({decimals:0})]})}if($(".glightboxGallery").length)GLightbox({selector:".glightboxGallery"});const r=65565,s="/sign-in",l="/redirect-page",d="/stoody/api/v1",c=d+"/user";function u(e,t){$("#"+e).length?1==t?$("#"+e).show():$("#"+e).hide():console.log("There's no such element with this id:"+e)}function p(e,t){return $("#"+e).length?(t?$("#"+e).prop("disabled",!0):$("#"+e).prop("disabled",!1),!0):(console.log(e+" does not belong to any existing element!"),!1)}if($("#standard_navbar_code_a").length){const N={SNB_LIKE:"fe fe-thumbs-up",SNB_AWARD:"bi-award",SNB_INFO:"bi-info-circle"};let F=[];function m(e){let t=$("#dropdownNotificationSecond"),o=$("#dropdownNotificationSecondMobile");e?(t.hasClass("indicator indicator-primary")||t.addClass("indicator indicator-primary"),o.hasClass("indicator indicator-primary")||o.addClass("indicator indicator-primary")):(t.hasClass("indicator indicator-primary")&&t.removeClass("indicator indicator-primary"),o.hasClass("indicator indicator-primary")&&o.removeClass("indicator indicator-primary"))}function f(){var e='                                    <li class="p-3 text-muted">                                        <i class="bi-bell-slash-fill"></i>                                        <span class="ms-2">No Notifications</span>                                    </li>';function t(e){let t=[],o=!1;if(e)for(let e=0;e<F.length;e++){let n=F[e];n.read||(o=!0);let a='<li class="list-group-item bg-light">                                        <div class="row">                                            <div class="col">                                                <a class="text-body" href="#">                                                    <div class="d-flex">'+(n.senderPhotoUrl?'                                                        <img src="'+n.senderPhotoUrl+'" alt="" class="avatar-md rounded-circle">':"")+'                                                        <div class="ms-3">                                                            <h5 class="fw-bold mb-1"> '+n.senderUsername+' </h5>                                                            <p class="mb-3 text-body">'+n.content+'                                                            </p>                                                            <span class="fs-6 text-muted">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span><span\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="'+N[n.badge]+' text-success me-1"></span>'+n.createdAt+'</span>                                                            </span>                                                        </div>                                                    </div>                                                </a>                                            </div>                                            <div class="col-auto text-center me-2">'+(n.read?"":'                                                <a id="notificationSecondMarkAsRead'+n.id+'" href="#" class="badge-dot bg-info">')+'                                                </a>                                                <div>                                                    <a id="notificationSecondRemoveNotification'+n.id+'" href="#" class="bg-transparent">                                                        <i class="fe fe-x text-muted"></i>                                                    </a>                                                </div>                                            </div>                                        </div>                                    </li>';t.push(a)}else for(let e=0;e<F.length;e++){let n=F[e];n.read||(o=!0);let a='<li class="list-group-item bg-light">                                        <div class="row">                                            <div class="col">                                                <a class="text-body" href="#">                                                    <div class="d-flex">'+(n.senderPhotoUrl?'                                                        <img src="'+n.senderPhotoUrl+'" alt="" class="avatar-md rounded-circle">':"")+'                                                        <div class="ms-3">                                                            <h5 class="fw-bold mb-1"> '+n.senderUsername+' </h5>                                                            <p class="mb-3 text-body">'+n.content+'                                                            </p>                                                            <span class="fs-6 text-muted">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span><span\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="'+N[n.badge]+' text-success me-1"></span>'+n.createdAt+'</span>                                                            </span>                                                        </div>                                                    </div>                                                </a>                                            </div>                                            <div class="col-auto text-center me-2">'+(n.read?"":'                                                <a id="notificationSecondMarkAsReadMobile'+n.id+'" href="#" class="badge-dot bg-info">')+'                                                </a>                                                <div>                                                    <a id="notificationSecondRemoveNotificationMobile'+n.id+'" href="#" class="bg-transparent">                                                        <i class="fe fe-x text-muted"></i>                                                    </a>                                                </div>                                            </div>                                        </div>                                    </li>';t.push(a)}return{_anyUnreadMessage_:o,_variables_:t}}if(t(!1)._anyUnreadMessage_?m(!0):m(!1),F.length<1)$("#notificationBoxSeeAllButton").hide(),$("#notificationBoxListGroup").html(e),$("#notificationBoxSeeAllButtonMobile").hide(),$("#notificationBoxListGroupMobile").html(e);else{let e=t(!1)._variables_.reverse(),o=t(!0)._variables_.reverse();$("#notificationBoxSeeAllButton").show(),$("#notificationBoxListGroup").html(e.join(" ")),$("#notificationBoxSeeAllButtonMobile").show(),$("#notificationBoxListGroupMobile").html(o.join(" "));for(let e=0;e<F.length;e++)$("#notificationSecondRemoveNotification"+F[e].id).on("click",(function(){console.log("remove this "+F[e].id);var t={url:"/stoody/api/v1/user/notifications/simple/remove?id="+F[e].id,method:"POST",timeout:0};$.ajax(t).done((function(e){h()})),$(this).hide()})),$("#notificationSecondRemoveNotificationMobile"+F[e].id).on("click",(function(){console.log("remove this "+F[e].id);var t={url:"/stoody/api/v1/user/notifications/simple/remove?id="+F[e].id,method:"POST",timeout:0};$.ajax(t).done((function(e){h()})),$(this).hide()})),F[e].read||($("#notificationSecondMarkAsRead"+F[e].id).on("click",(function(){console.log("clicked"+F[e].id);var t={url:"/stoody/api/v1/user/notifications/simple/read?id="+F[e].id,method:"POST",timeout:0};$.ajax(t).done((function(e){h()})),$(this).hide()})),$("#notificationSecondMarkAsReadMobile"+F[e].id).on("click",(function(){console.log("clicked"+F[e].id);var t={url:"/stoody/api/v1/user/notifications/simple/read?id="+F[e].id,method:"POST",timeout:0};$.ajax(t).done((function(e){h()})),$(this).hide()})))}}function h(){$.ajax({url:"/stoody/api/v1/user/notifications/simple/get/all",method:"GET",timeout:0}).done((function(e){try{e.response.length<1?(F=[],f()):F=e.response}catch(e){F=[]}f()}))}h();var _=null,g=null,v=new SockJS("/ws");(_=Stomp.over(v)).connect({},(function(e){_.subscribe("/all/messages",(function(e){h()}))})),v=new SockJS("/ws"),(g=Stomp.over(v)).connect({},(function(e){g.subscribe("/user/specific",(function(e){h()}))}))}if($("#sign_in_page_submit_button").length&&$("#sign_in_page_submit_button").on("click",(function(){$("#sign_in_page_submit_button").attr("disabled",!0),$("#sign_in_page_submit_button_spinner").show();var e=new FormData;e.append("username",$("#username").val()),e.append("password",$("#password").val());var t={url:c+s,method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:e};$.ajax(t).done((function(e){$("#sign_in_page_submit_button_spinner").hide();let t=JSON.parse(e),o=t.responseStatus,n=t.response;"OTP_REQUIRED_AND_SENT"==o?window.location.href="/verify-password?openCode="+r:"SUCCESS"==o?(console.log(n),setCookie("Auth",n,7),window.location.href="/",console.log(getCookie("Auth"))):($("#sign_in_page_submit_button").attr("disabled",!1),$("#error_div").show())})).fail((function(){$("#sign_in_page_submit_button").attr("disabled",!1),$("#sign_in_page_submit_button_spinner").hide(),$("#error_div").show()}))})),$("#verify_password_page_submit_button").length&&$("#verify_password_page_submit_button").on("click",(function(){$("#verify_password_page_submit_button").attr("disabled",!0),$("#verify_password_page_submit_button_spinner").show();var e=new FormData;e.append("token",$("#validationCode").val()),e.append("username",$("#username").val());var t={url:c+s+"/verify",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:e};$.ajax(t).done((function(e){let t=JSON.parse(e),o=t.responseStatus,n=t.response;"SUCCESS"==o?(console.log(n),setCookie("Auth",n,7),window.location.href=l+"?openCode="+r+"&header=global.success&message=global.you_have_signed_in_successfully",console.log(getCookie("Auth"))):"FAIL"==o?($("#verify_password_page_submit_button").attr("disabled",!1),$("#error_div").show()):window.location.href="ACCOUNT_TEMPORAL_BLOCK_TOO_MANY_REQUESTS"==o?l+"?openCode="+r+"&header=global.account_blocked_temporarily&message=global.account_blocked_too_many_attempts":l+"?openCode="+r+"&header=global.error&message=global.unknown_error_happened_sorry"})).fail((function(){window.location.href=l+"?openCode="+r+"&header=global.error&message=global.unknown_error_happened_sorry"}))})),$("#profile_edit_update_picture_button").length&&($("#profile_edit_update_picture_button").on("click",(function(){$("#profile_edit_update_picture_input_file").click()})),$("#profile_edit_update_picture_input_file").on("change",(function(e){p("profile_edit_delete_picture_button",!0),$("#profile_edit_delete_picture_button_spinner").hide(),$("#profile_edit_update_picture_button_spinner").show(),$("#profile_edit_page_avatar_error").hide();let t=new FormData;t.append("file",document.getElementById("profile_edit_update_picture_input_file").files[0]),console.log(document.getElementById("profile_edit_update_picture_input_file").files[0]);var o={url:"/stoody/api/v1/upload/put/small",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:t};$.ajax(o).done((function(e){try{let n=JSON.parse(e),a=n.responseStatus,i=n.response;if("SUCCESS"==a){var t=new FormData;t.append("pictureURL",i);var o={url:"/stoody/api/v1/user/update/picture",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:t};$.ajax(o).done((function(e){let t=JSON.parse(e),o=t.responseStatus;t.response;"SUCCESS"==o?location.reload():(p("profile_edit_delete_picture_button",!1),$("#profile_edit_delete_picture_button_spinner").hide(),$("#profile_edit_update_picture_button_spinner").hide(),$("#profile_edit_page_avatar_error").show())})).fail((function(){p("profile_edit_delete_picture_button",!1),$("#profile_edit_delete_picture_button_spinner").hide(),$("#profile_edit_update_picture_button_spinner").hide(),$("#profile_edit_page_avatar_error").show()}))}else p("profile_edit_delete_picture_button",!1),$("#profile_edit_delete_picture_button_spinner").hide(),$("#profile_edit_update_picture_button_spinner").hide(),$("#profile_edit_page_avatar_error").show()}catch(e){p("profile_edit_delete_picture_button",!1),$("#profile_edit_delete_picture_button_spinner").hide(),$("#profile_edit_update_picture_button_spinner").hide(),$("#profile_edit_page_avatar_error").show()}})).fail((function(){p("profile_edit_delete_picture_button",!1),$("#profile_edit_delete_picture_button_spinner").hide(),$("#profile_edit_update_picture_button_spinner").hide(),$("#profile_edit_page_avatar_error").show()}))}))),$("#profile_edit_delete_picture_button").length&&$("#profile_edit_delete_picture_button").on("click",(function(){p("profile_edit_update_picture_button",!0),$("#profile_edit_delete_picture_button_spinner").show(),$("#profile_edit_update_picture_button_spinner").hide(),$("#profile_edit_page_avatar_error").hide();$.ajax({url:"/stoody/api/v1/user/delete/picture",method:"POST",timeout:0}).done((function(e){location.reload()})).fail((function(){p("profile_edit_update_picture_button",!1),$("#profile_edit_delete_picture_button_spinner").hide(),$("#profile_edit_update_picture_button_spinner").hide(),$("#profile_edit_page_avatar_error").show()}))})),$("#userProfileSecurityPage").length){function b(e){$("#securityValidationModal").modal("show"),$("#verificationCodeInputError").hide(),$("#verificationCodeInput").val(""),$("#verifyButton").off(),$("#verifyButton").on("click",(function(){let t;t="email"==e?"/user/profile/security/email/verify?email="+$("#email").val().trim()+"&otp="+$("#verificationCodeInput").val().trim():"/user/profile/security/phone/verify?phoneNumber="+$("#phone").val().trim()+"&otp="+$("#verificationCodeInput").val().trim();var o={url:t,method:"POST",timeout:0};$.ajax(o).done((function(e){try{let t=e.responseStatus,o=e.response;"SUCCESS"==t?location.reload():"BAD_REQUEST"==t||"ACCESS_DENIED"==t?($("#verificationCodeInputError").show(),$("#verificationCodeInputError").text(o)):($("#verificationCodeInputError").show(),$("#verificationCodeInputError").text("You are not authorized to perform this action!"))}catch(e){$("#verificationCodeInputError").show(),$("#verificationCodeInputError").text("You are not authorized to perform this action!")}}))}))}$("#updateEmailRequestButton").on("click",(function(){$("#updateEmailRequestButton").attr("disabled",!0),$("#updateEmailErrorMessage").hide();var e=new FormData,t={url:"/user/profile/security/email/change/request?email="+$("#email").val().trim(),method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:e};$.ajax(t).done((function(e){try{let t=JSON.parse(e),o=t.responseStatus,n=t.response;"OTP_REQUIRED_AND_SENT"==o?b("email"):($("#updateEmailErrorMessage").show(),$("#updateEmailErrorMessage").text(n))}catch(e){$("#updateEmailErrorMessage").show(),$("#updateEmailErrorMessage").text("You are not allowed to make this request!")}$("#updateEmailRequestButton").attr("disabled",!1)})).fail((function(){$("#updateEmailErrorMessage").show(),$("#updateEmailErrorMessage").text("You are not allowed to make this request!"),$("#updateEmailRequestButton").attr("disabled",!1)}))})),$("#savePasswordButton").on("click",(function(){$("#passwordError").hide(),$("#savePasswordButton").attr("disabled",!0);let t=$("#currentpassword").val(),o=$("#newpassword").val();var n={url:"/user/profile/security/password/change?currentPassword="+t+"&newPassword="+o+"&confirmPassword="+$("#confirmpassword").val()+"&strength="+e(o),method:"POST",timeout:0};$.ajax(n).done((function(e){try{let t=e.responseStatus,o=e.response;"SUCCESS"==t?$("#passwordError").text("Password has been updated!"):$("#passwordError").text(o),$("#passwordError").show(),$("#savePasswordButton").attr("disabled",!1)}catch(e){$("#passwordError").show(),$("#passwordError").text("You are not allowed to make this request!"),$("#savePasswordButton").attr("disabled",!1)}})).fail((function(){$("#passwordError").show(),$("#passwordError").text("You are not allowed to make this request!"),$("#savePasswordButton").attr("disabled",!1)}))})),$("#updatePhoneNumberButton").on("click",(function(){$("#updatePhoneNumberButton").attr("disabled",!0),$("#updatePhoneNumberErrorMessage").hide();var e=new FormData,t={url:"/user/profile/security/phone/change/request?phoneNumber="+$("#phone").val().trim(),method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:e};$.ajax(t).done((function(e){try{let t=JSON.parse(e),o=t.responseStatus,n=t.response;"OTP_REQUIRED_AND_SENT"==o?b("phone"):($("#updatePhoneNumberErrorMessage").show(),$("#updatePhoneNumberErrorMessage").text(n))}catch(e){$("#updatePhoneNumberErrorMessage").show(),$("#updatePhoneNumberErrorMessage").text("You are not allowed to make this request!")}$("#updatePhoneNumberButton").attr("disabled",!1)})).fail((function(){$("#updatePhoneNumberErrorMessage").show(),$("#updatePhoneNumberErrorMessage").text("You are not allowed to make this request!"),$("#updatePhoneNumberButton").attr("disabled",!1)}))}))}if($("#social_profiles_page_id").length){let P=document.getElementById("editor");setInterval((function(){P.querySelector(".ql-editor").innerHTML.length>13e3?$("#social_profile_page_editor_error").show():$("#social_profile_page_editor_error").hide();let e=document.getElementById("userSkills").value.length<1?null:JSON.parse(document.getElementById("userSkills").value),t="";if(null!=e)for(let o=0;o<e.length;o++)t+=o<1?e[o].value:", "+e[o].value;t.length>254?$("#social_profile_page_tagify_error").show():$("#social_profile_page_tagify_error").hide(),$("#social_profile_page_tagify_error").is(":visible")||$("#social_profile_page_editor_error").is(":visible")?u("social_profiles_page_submit_button",!1):u("social_profiles_page_submit_button",!0)}),500),$("#social_profiles_page_submit_button").on("click",(function(){$("#social_profiles_page_alert_div").hide();let e=document.getElementById("userSkills").value.length<1?null:JSON.parse(document.getElementById("userSkills").value),t="";if(null!=e)for(let o=0;o<e.length;o++)t+=o<1?e[o].value:","+e[o].value;let o=P.querySelector(".ql-editor").innerHTML,n=document.getElementById("twitterURL").value,a=document.getElementById("facebookURL").value,i=document.getElementById("githubURL").value,r=document.getElementById("instagramURL").value,s=document.getElementById("linkedInURL").value,l=document.getElementById("youtubeURL").value;var d=new FormData;d.append("twitterURL",n),d.append("facebookURL",a),d.append("githubURL",i),d.append("instagramURL",r),d.append("linkedinURL",s),d.append("youtubeURL",l),d.append("skills",t),d.append("aboutUser",o);var c={url:"/stoody/api/v1/user/social/profiles/update",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:d};$.ajax(c).done((function(e){console.log(e),"SUCCESS"==JSON.parse(e).responseStatus?location.reload():$("#social_profiles_page_alert_div").show()})).fail((function(){$("#social_profiles_page_alert_div").show()}))}))}$("#preview_user_page_follow_button").length&&$("#preview_user_page_follow_button").on("click",(function(){$("#preview_user_page_follow_button").attr("disabled",!0);let e=new FormData,t=$(this).attr("data-username-string"),o=$(this).attr("data-preview-username-string");e.append("userFrom",t),e.append("userTo",o);let n={url:"/stoody/api/v1/user/follow/add",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:e};$.ajax(n).done((function(e){console.log(e),"SUCCESS"==JSON.parse(e).responseStatus?location.reload():console.log("User could not be followed! (Reason is necessary!)"),$("#preview_user_page_follow_button").attr("disabled",!1)})).fail((function(){$("#preview_user_page_follow_button").attr("disabled",!1),console.log("Request is failed!")}))})),$("#preview_user_page_unfollow_button").length&&$("#preview_user_page_unfollow_button").on("click",(function(){$("#preview_user_page_unfollow_button").attr("disabled",!0);let e=new FormData,t=$(this).attr("data-username-string"),o=$(this).attr("data-preview-username-string");e.append("userFrom",t),e.append("userTo",o);let n={url:"/stoody/api/v1/user/follow/remove",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:e};$.ajax(n).done((function(e){console.log(e),"SUCCESS"==JSON.parse(e).responseStatus?location.reload():console.log("User could not be followed! (Reason is necessary!)"),$("#preview_user_page_unfollow_button").attr("disabled",!1)})).fail((function(){$("#preview_user_page_unfollow_button").attr("disabled",!1),console.log("Request is failed!")}))})),$("#preview_user_page_report_button").length&&$("#preview_user_page_report_button").on("click",(function(){const e=$("#reportReasonText").val();if(e.length<1)return void $("#reportAlertContainer").show();$("#preview_user_page_report_button").attr("disabled");let t=$(this).attr("data-username-string"),o=$(this).attr("data-preview-username-string");var n=new FormData;n.append("reportedBy",t),n.append("reportedUser",o),n.append("reportReason",e);var a={url:"/users/preview/report",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:n};$.ajax(a).done((function(e){console.log(e);let t=JSON.parse(e).response;$("#reportContainer").hide(),$("#reportAlertContainer").show(),$("#reportAlertContainer").text(t)})).fail((function(){location.reload()}))}));for(let D=1;D<21;D++)if(0!==$("#user_profile_navbar_button_"+D+"_page").length){document.getElementById("user_profile_navbar_button_"+D).parentNode.classList.add("active");break}if($("#standard_navbar_code_a").length){function w(e){var t={url:"/user/status/setme"+e,method:"POST",timeout:0};$.ajax(t).done((function(e){"SUCCESS"==e.responseStatus?location.reload():console.log("setting user status failed")}))}$("#standard_navbar_user_status_online").on("click",(function(){w("online")})),$("#standard_navbar_mobile_version_user_status_online").on("click",(function(){w("online")})),$("#standard_navbar_user_status_offline").on("click",(function(){w("offline")})),$("#standard_navbar_mobile_version_user_status_offline").on("click",(function(){w("offline")})),$("#standard_navbar_user_status_away").on("click",(function(){w("away")})),$("#standard_navbar_mobile_version_user_status_away").on("click",(function(){w("away")})),$("#standard_navbar_user_status_busy").on("click",(function(){w("busy")})),$("#standard_navbar_mobile_version_user_status_busy").on("click",(function(){w("busy")}))}if($("#helpCenterGlobalSearchBarForm").length){let O=$("#helpCenterGlobalSearchBarForm");$("#helpCenterGlobalSearchBarButton").on("click",(function(){O.find("#helpCenterGlobalSearchBarInput").val().length<1||(window.location.href="/help/search/"+O.find("#helpCenterGlobalSearchBarInput").val())}))}if($("#helpCenterLandingSearchForm").length&&$("#helpCenterLandingSearchFormButton").on("click",(function(){window.location.href="/help/search/"+$("#helpCenterLandingSearchFormInput").val()})),$("#help_center_manage_content_page").length&&(console.log("AMK"),$("#pills-development-tab").on("click",(function(){$("#contentPreviewer").html("")})),$("#pills-design-tab").on("click",(function(){$("#content").val().length>0?$("#contentPreviewer").html($("#content").val()):$("#contentPreviewer").html('<div class="p-3">Your HTML Content Preview</div>')}))),$("#course_overview_admin_dashboard").length){let I=20,M=I,A=-12519;$(window).scroll((function(){$(document).height()-$(this).height()==$(this).scrollTop()&&$(this).scrollTop()!=A&&(A=$(this).scrollTop(),M+=I,S(M))}));const j=["courses_tab_tbody","approved_tab_tbody","pending_tab_tbody"];let q=j[0];const V=["live","draft","deleted","pending"];let J=0,H=V[0],z="";let G=[];function y(){let e=$("#"+q);for(let e=0;e<j.length;e++)$("#"+j[e]).children().off(),$("#"+j[e]).html("");if(courseOverviewDTOFiltered=G,q!=j[0]){courseOverviewDTOFiltered=[];let e=q==j[1]?"Live":"Pending";for(let t=0;t<G.length;t++){let o=G[t];o.status==e&&courseOverviewDTOFiltered.push(o)}}if(null!=z&&""!=z){let e=[];for(let t=0;t<courseOverviewDTOFiltered.length;t++){let o=courseOverviewDTOFiltered[t];naiveSearch(o.name,z)&&e.push(o)}courseOverviewDTOFiltered=e}for(let t=0;t<courseOverviewDTOFiltered.length;t++){let o=courseOverviewDTOFiltered[t];$("<tr></tr>").append($("<td></td>").append($("<span></span>").text(t+1)),$("<td></td>").append($("<a></a>").attr("href","#").addClass("text-inherit").append($("<div></div>").addClass("d-lg-flex align-items-center").append(null==o.courseThumbnail||""==o.courseThumbnail?$("<div></div>").append($("<i></i>").addClass("bi-card-image fs-1 text-muted")):$("<img/>").addClass("img-4by3-lg rounded").attr("src",o.courseThumbnail).attr("width","50"),$("<a></a>").addClass("ms-lg-3 mt-2 mt-lg-0").append($("<span></span>").addClass("mb-1 me-2 text-link").text(o.name),$("<br>"),$("<span></span>").append($("<i></i>").addClass("mdi mdi-clock-time-four-outline text-muted me-1"),$("<span></span>").addClass("text-muted").text(o.createdAt))).attr("href","/stoody/api/v1/course/stoody/course/"+o.id+"/editor")))),$("<td></td>").append($("<div></div>").addClass("d-flex align-items-center").append($("<a></a>").attr("href","/users/"+o.authorUsername).addClass("text-link mb-0").text(o.authorUsername))),$("<td></td>").append($("<div></div>").append($("<span></span>").addClass(("Draft"==o.status?"bg-warning":"Pending"==o.status?"bg-info":"Live"==o.status?"bg-primary":"bg-danger")+" badge-dot me-1 d-inline-block align-middle me-2"),$("<span></span>").text(o.status))),"Draft"==o.status?$("<td></td>").append($("<span></span>").addClass("text-muted").text("No action")):"Pending"==o.status?$("<td></td>").append($("<a></a>").addClass("btn btn-warning btn-sm me-1 pendingCourseRejectButton").attr("id","pendingCourseRejectButton"+o.id).text("Reject"),$("<a></a>").addClass("btn btn-success btn-sm pendingCourseApproveFeedbackButton").attr("id","pendingCourseApproveFeedbackButton"+o.id).text("Approve")):"Live"==o.status?$("<td></td>").append($("<a></a>").addClass("btn btn-warning btn-sm me-1 pendingCourseRejectButton").attr("id","pendingCourseRejectButton"+o.id).text("Draft"),$("<a></a>").addClass("btn btn-danger btn-sm liveCourseDeletedFeedbackButton").attr("id","liveCourseDeletedFeedbackButton"+o.id).text("Deleted")):$("<td></td>").append($("<a></a>").addClass("btn btn-warning btn-sm me-1 pendingCourseRejectButton").attr("id","pendingCourseRejectButton"+o.id).text("Draft"),$("<a></a>").addClass("btn btn-success btn-sm pendingCourseApproveFeedbackButton").attr("id","pendingCourseApproveFeedbackButton"+o.id).text("Live")),"Draft"==o.status||"Deleted"==o.status||"Live"==o.status?$("<td></td>").append($("<span></span>").addClass("text-muted").text("No action")):$("<td></td>").append($("<a></a>").attr("href","#").addClass("text-link pendingCourseRejectFeedbackButton").attr("id","pendingCourseRejectFeedbackButton"+o.id).text("Reject with Feedback"))).appendTo(e)}$(".pendingCourseRejectButton").each((function(e,t){$(this).on("click",(function(){const e=$(this).attr("id").replace("pendingCourseRejectButton","");var t=new FormData;t.append("id",e);var o={url:"/stoody/api/v1/course/stoody/authorized/course/draft",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:t};$.ajax(o).done((function(e){console.log(e),S(M)}))}))})),$(".pendingCourseApproveFeedbackButton").each((function(e,t){$(this).on("click",(function(){H=V[0],J=$(this).attr("id").replace("pendingCourseApproveFeedbackButton",""),$("#feedbackModal").modal("show")}))})),$(".pendingCourseRejectFeedbackButton").each((function(e,t){$(this).on("click",(function(){H=V[1],J=$(this).attr("id").replace("pendingCourseRejectFeedbackButton",""),$("#feedbackModal").modal("show")}))})),$(".liveCourseDeletedFeedbackButton").each((function(e,t){$(this).on("click",(function(){H=V[2],J=$(this).attr("id").replace("liveCourseDeletedFeedbackButton",""),$("#feedbackModal").modal("show")}))}))}function S(e){var t={url:"/stoody/api/v1/course/stoody/authorized/course/all/overview?limit="+e,method:"GET",timeout:0};$.ajax(t).done((function(e){try{G=e,y()}catch(e){G=[],y()}}))}$("#courses-tab").on("click",(function(){q=j[0],S(M)})),$("#approved-tab").on("click",(function(){q=j[1],S(M)})),$("#pending-tab").on("click",(function(){q=j[2],S(M)})),$("#searchBarId").on("input",(function(){z=$(this).val(),y()})),$("#sendFeedbackButton").on("click",(function(){if($("#feedbackTextArea").val().length<1)return;let e=H==V[0]?"/live":H==V[1]?"/draft/feedback":"/delete";var t=new FormData;t.append("id",J),t.append("message",$("#feedbackTextArea").val());var o={url:"/stoody/api/v1/course/stoody/authorized/course"+e,method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:t};$.ajax(o).done((function(e){S(M),console.log(e)})),setTimeout((function(){$("#sendFeedbackButton").modal("hide")}),500)})),$("#refreshTableButton").on("click",(function(){S(M)})),S(M)}if($("#internationalization_page_id").length&&$("#locale").on("input",(function(){$("#localeFlag").removeClass();let e="en"==$("#locale").val()?"us":$("#locale").val();$("#localeFlag").addClass("fi fi-"+e)})),$("#course_configuration_page").length){const Y={Beginners:0,Intermediate:1,Advance:2,ZeroToHero:3},Q=$("#course_configuration_page");let W=$("#course_thumbnail_input_file"),K=$("#course_thumbnail_input_remove"),Z=$("#course_promo_video_input_file"),X=$("#course_promo_video_input_name"),ee=$("#course_promo_video_input_remove"),te=$("#course_configuration_page_add_section_button"),oe=document.getElementById("course_configuration_page_add_section_input"),ne=$("#course_configuration_page_curriculum_modal_add_lecture_button"),ae=document.getElementById("course_configuration_page_curriculum_modal_input"),ie=$("#uploadStartButton"),re=$("#submitCourseButton"),se=0;let le={congratulationsMessage:"",contextTags:"",courseCategoryId:0,courseStatus:0,currency:"",description:"",discount:"",languageCode:"",level:0,price:0,promoVideoName:"",promoVideoURL:"",sections:[],tags:"",thumbnailName:"",thumbnailURL:"",title:"",welcomeMessage:""};function C(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}function k(e,t,o,n,a,i){n?(e.hide(),t.show(),t.text(a),o.show(),o.off()):(t.hide(),o.hide(),o.hide(),e.show(),e.val("")),i instanceof Function&&i()}function T(e){var t=Math.pow(10,1);return(e=Math.round(e/1024))<1e3?e+" KB":(e=Number.parseFloat(e/1024))<1e3?Math.round(e*t)/t+" MB":(e=Number.parseFloat(e/1024),Math.round(e*t)/t+" GB")}function x(){k(W,$("#course_thumbnail_input_name"),K,!0,le.thumbnailName,null),K.on("click",(function(){k(W,$("#course_thumbnail_input_name"),K,!1,le.thumbnailName,(function(){le.thumbnailName="",le.thumbnailURL=""}))}))}function B(){k(Z,X,ee,!0,le.promoVideoName,null),ee.on("click",(function(){k(Z,X,ee,!1,le.promoVideoName,(function(){le.promoVideoName="",le.promoVideoURL=""}))}))}function E(){if(null!=le.title&&$("#courseTitle").val(le.title),null!=le.contextTags){setTimeout((function(){$("#courseContextTags").val(le.contextTags),console.log(le.contextTags)}),500)}if(null!=le.description&&""!=le.description){document.getElementById("editor").querySelector(".ql-editor").innerHTML=le.description}if(null!=le.thumbnailName&&le.thumbnailName.length>0&&x(),null!=le.promoVideoName&&le.promoVideoName.length>0&&B(),null!=le.courseCategoryId&&$("#courseCategory").val(le.courseCategoryId.toString()),null!=le.level&&$("#courseLevel").val(Y[le.level]),null!=le.price&&$("#coursePriceInput").val(le.price),null!=le.discount&&$("#coursePriceDiscountInput").val(le.discount),null!=le.welcomeMessage&&$("#welcomeMessageInput").val(le.welcomeMessage),null!=le.congratulationsMessage&&$("#congratulationMessage").val(le.congratulationsMessage),null!=le.tags){setTimeout((function(){$("#courseTagsInput").val(le.tags),console.log(le.tags)}),500)}$(".selectpicker").selectpicker("render"),R()}function R(){let e=$("#courseSectionContents");e.children().off(),e.html("");try{le.sections.length}catch{le.sections=[]}0==le.sections.length?$("#courseSectionEmptyMessage").show():$("#courseSectionEmptyMessage").hide();for(let t=0;t<le.sections.length;t++){let o=$("#courseSectionElementReference").clone();o.show(),o.attr("id",o.attr("id")+t);let n=o.find("#courseSectionElementHeader");n.attr("id",n.attr("id")+t),n.val(le.sections[t].title),n.on("input",(function(){le.sections[t].title=n.val()}));let a=o.find("#courseSectionElementRemoveButton");a.attr("id",a.attr("id")+t),a.on("click",(function(e){le.sections.splice(t,1),R()}));let i=o.find("#sectionLectureList");i.attr("id",i.attr("id")+t);let r=i.find("#courseListElement");r.attr("id",r.attr("id")+t);let s=i.find("#sectionLecturesPasteArea");s.children().off(),s.html("");let l=o.find("#emptySectionMessage");l.attr("id",l.attr("id")+t);try{le.sections[t].lectures.length}catch{le.sections[t].lectures=[]}le.sections[t].lectures.length<1?l.show():l.hide();for(let e=0;e<le.sections[t].lectures.length;e++){let o=i.find("#lectureDiv").clone();o.attr("id",o.attr("id")+e),o.show();let n=o.find("#articleLockSwitch");n.attr("id",n.attr("id")+t+"_"+e),le.sections[t].lectures[e].locked&&n.attr("checked",!0),n.on("click",(function(){le.sections[t].lectures[e].locked?le.sections[t].lectures[e].locked=!1:le.sections[t].lectures[e].locked=!0}));let a=o.find("#articleLockSwitchLabel");a.attr("id",a.attr("id")+t+"_"+e),a.attr("for",n.attr("id")+t+"_"+e);let l=o.find("#lectureHeader");l.attr("id",l.attr("id")+e),l.val(le.sections[t].lectures[e].title),l.on("input",(function(){le.sections[t].lectures[e].title=l.val()}));let d=o.find("#lectureCollapseList");d.attr("id","lectureCollapseList"+t+"_"+e),d.attr("aria-labelledby",r.attr("id")),d.attr("data-bs-parent",i.attr("id"));let c=o.find("#lectureCollapseButton");c.attr("data-bs-target","#"+d.attr("id")),c.attr("aria-controls",d.attr("id")),0==le.sections[t].lectures[e].uiCollapsed?(c.attr("aria-expanded","true"),d.addClass("show")):(c.addClass("collapsed"),c.attr("aria-expanded","false")),d.on("shown.bs.collapse",(function(){le.sections[t].lectures[e].uiCollapsed=!1})),d.on("hidden.bs.collapse",(function(){le.sections[t].lectures[e].uiCollapsed=!0})),o.find("#lecture_remove").on("click",(function(){le.sections[t].lectures.splice(e,1),R()}));let u=d.find("#lecture_article");u.attr("id",u.attr("id")+e);let p=u.find("#lectureArticleInputFilled");if(p.attr("id",p.attr("id")+e),le.sections[t].lectures[e].articleName.length>0){u.show();let o=u.find("#lecture_article_input_file");o.attr("id",o.attr("id")+e),o.hide();let n=p.find("#lecture_article_input_file_name");n.attr("id",n.attr("id")+e),n.show(),n.text(le.sections[t].lectures[e].articleName);let a=p.find("#lecture_article_input_file_remove");a.show(),a.on("click",(function(){le.sections[t].lectures[e].articleName="",le.sections[t].lectures[e].article=new FormData,R()}))}else{let n=o.find("#lecture_add_article_button");n.show(),n.attr("id",n.attr("id")+e),n.on("click",(function(){u.show();let o=u.find("#lecture_article_input_file");o.on("change",(function(){let n=o.val().replace(/C:\\fakepath\\/i,""),a=new FormData;a.append("file",o[0].files[0]),le.sections[t].lectures[e].article=a,le.sections[t].lectures[e].articleName=n,R()})),n.hide()}))}let m=o.find("#lecture_description");if(m.attr("id",m.attr("id")+e),le.sections[t].lectures[e].description.length>0){m.show();let o=m.find("#lecture_description_input");o.attr("id",o.attr("id")+e),o.val(le.sections[t].lectures[e].description),o.on("input",(function(){le.sections[t].lectures[e].description=$(this).val()}))}else{let n=o.find("#lecture_add_description_button");n.show(),n.attr("id",n.attr("id")+e),n.on("click",(function(){m.show();let o=m.find("#lecture_description_input");o.attr("id",o.attr("id")+e),o.on("input",(function(){le.sections[t].lectures[e].description=$(this).val()})),n.hide()}))}o.appendTo(s)}let d=o.find("#section_add_lecture_button");d.attr("id","section_add_lecture_button"+t),d.on("click",(function(){se=t})),o.appendTo(e)}}function L(e){let t=[],o=0,n=0,a=0,i=0,r=0,s=$("#uploadFormProgressBar"),l=$("#uploadLogger");function d(e){l.html(l.html()+'<span class="bg-dark-warning-soft">'+e+"</span><br>")}function c(){$("#courseUploadProgressBarBottomText").hide(),s.css("width","100%"),$("#uploadFormHeaderText").hide(),$("#uploadFormHeaderSpinner").hide(),$("#uploadFormHeaderDoneWithErrorsIcon").show(),$("#uploadFormCompleteButtonSpinner").hide(),t.length>0?d("Uploading assets is failed: "+t):d("Uploading assets is failed..."),d("Course could not be updated."),e||p(!0),m(!0)}function u(){d("The total size of the uploaded files: "+T(n)),$("#uploadFormHeaderText").hide(),$("#uploadFormHeaderSpinner").hide(),$("#uploadFormHeaderDoneIcon").show(),$("#uploadFormCompleteButtonSpinner").hide(),t.length>0?d("Uploading assets is finished with errors:"+t):d("Uploading assets is finished..."),d("Course is updated."),$("#courseUploadProgressBarBottomText").hide(),e||p(!0),m(!0)}function p(e){e?($("#uploadFormReloadPageButtonSpinner").hide(),$("#uploadFormReloadPageButton").on("click",(function(){location.reload()}))):$("#uploadFormReloadPageButton").off()}function m(e){e?$("#uploadFormNextButton").on("click",(function(){window.location.href="/"})):$("#uploadFormNextButton").off()}!function(){le.title=$("#courseTitle").val(),le.title.length<1&&(le.title="Untitled");let e=$("#courseTagsInput").val().length<1?null:JSON.parse($("#courseTagsInput").val()),t="";if(null!=e)for(let o=0;o<e.length;o++)t+=o<1?e[o].value:","+e[o].value;le.tags=t;let o=document.getElementById("courseContextTags").value.length<1?null:JSON.parse(document.getElementById("courseContextTags").value),n="";if(null!=o)for(let e=0;e<o.length;e++)n+=e<1?o[e].value:","+o[e].value;le.contextTags=n,le.courseCategoryId=$("#courseCategory").val(),(null==le.courseCategoryId||null==le.courseCategoryId||le.courseCategoryId<0)&&(le.courseCategoryId=1),le.level=$("#courseLevel").val(),(null==le.level||null==le.level||le.level<0)&&(le.level=0),console.log("ONCE UPDATE STATIC COURSE FIELDS THE COURSE LEVEL IS: "+le.level);let a=document.getElementById("editor").querySelector(".ql-editor").innerHTML;le.description=a,le.price=$("#coursePriceInput").val(),null!=le.price&&null!=le.price||(le.price=0),le.discount=$("#coursePriceDiscountInput").val(),null!=le.discount&&null!=le.discount||(le.discount=0),le.welcomeMessage=$("#welcomeMessageInput").val(),le.congratulationsMessage=$("#congratulationMessage").val()}(),$("#uploadModal").modal("hide"),$("#submitModal").modal("hide"),$("#courseForm").hide(),$("#courseFormHeader").hide(),$("#uploadForm").show(),$("#courseUploadProgressBarBottomText").show(),$("#uploadFormCourseTitle").text(le.title),$("#uploadFormReloadPageButton").hide(),0==e&&$("#uploadFormReloadPageButton").show(),p(!1),m(!1),l.html(""),d("Checking the assets...");let f=[];if(le.thumbnailName.length>0&&le.thumbnailURL instanceof FormData){n+=le.thumbnailURL.get("file").size,o++;var h={url:"/stoody/api/v1/upload/put/large",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:le.thumbnailURL};let e=$.ajax(h).done((function(e){let l=JSON.parse(e),c=l.responseStatus,u=l.response;"SUCCESS"==c?(d(le.thumbnailURL.get("file").name+" uploaded successfully."),r+=le.thumbnailURL.get("file").size,d(T(r)+"/"+T(n)+" uploaded successfully."),le.thumbnailURL=u):(d(le.thumbnailURL.get("file").name+" could not be uploaded."),t.push(le.thumbnailURL.get("file").name+" could not be uploaded.")),a++,i=a/o*100,s.css("width",i+"%")})).fail((function(){d(le.thumbnailURL.get("file").name+" could not be uploaded. Bad Request."),t.push(le.thumbnailURL.get("file").name+" could not be uploaded. Bad Request.")}));f.push(e)}if(le.promoVideoName.length>0&&le.promoVideoURL instanceof FormData){n+=le.promoVideoURL.get("file").size,o++;h={url:"/stoody/api/v1/upload/put/large",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:le.promoVideoURL};let e=$.ajax(h).done((function(e){let l=JSON.parse(e),c=l.responseStatus,u=l.response;"SUCCESS"==c?(d(le.promoVideoURL.get("file").name+" uploaded successfully."),r+=le.promoVideoURL.get("file").size,d(T(r)+"/"+T(n)+" uploaded successfully."),le.promoVideoURL=u):(d(le.promoVideoURL.get("file").name+" could not be uploaded."),t.push(le.promoVideoURL.get("file").name+" could not be uploaded.")),a++,i=a/o*100,s.css("width",i+"%")})).fail((function(){d(le.promoVideoURL.get("file").name+" could not be uploaded. Bad Request."),t.push(le.promoVideoURL.get("file").name+" could not be uploaded. Bad Request.")}));f.push(e)}for(let e=0;e<le.sections.length;e++)for(let l=0;l<le.sections[e].lectures.length;l++)try{let c=le.sections[e].lectures[l];if(c.article instanceof FormData){n+=c.article.get("file").size,o++;h={url:"/stoody/api/v1/upload/put/large",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:c.article};let e=$.ajax(h).done((function(e){let l=JSON.parse(e),u=l.responseStatus,p=l.response;"SUCCESS"==u?(d(c.article.get("file").name+" uploaded successfully."),r+=c.article.get("file").size,d(T(r)+"/"+T(n)+" uploaded successfully."),c.article=p):(d(c.article.get("file").name+" could not be uploaded."),t.push(c.article.get("file").name+" could not be uploaded.")),a++,i=a/o*100,s.css("width",i+"%")})).fail((function(){d(c.article.get("file").name+" could not be uploaded. Bad Request."),t.push(c.article.get("file").name+" could not be uploaded. Bad Request.")}));f.push(e)}else c.article.length<1&&c.description.length<1&&d("Section: "+e+" Lecture: "+l+" contains neither article nor description.")}catch(e){d("An error occured while uploading: "+e),t.push("An error occured while uploading: "+e)}f.length<1&&d("No asset found to upload..."),$.when.apply(null,f).done((function(){C(le.description)&&(le.description=JSON.stringify(le.description)),le.description=le.description.trim();for(let e=0;e<le.sections.length;e++)for(let t=0;t<le.sections[e].lectures.length;t++){let o=le.sections[e].lectures[t];C(o.article)&&(o.article=JSON.stringify(o.article))}C(le.thumbnailURL)&&(le.thumbnailURL=JSON.stringify(le.thumbnailURL)),C(le.promoVideoURL)&&(le.promoVideoURL=JSON.stringify(le.promoVideoURL)),function(e){let o="/save";e&&(o+="/submit");var n={url:"/stoody/api/v1/course"+o,method:"POST",timeout:0,headers:{"Content-Type":"application/json"},data:JSON.stringify(le)};$.ajax(n).done((function(e){u()})).fail((function(){t+=" Request could not be made. Check course fields, please.",c()}))}(e)})).fail((function(){c()}))}W.on("change",(function(){let e=new FormData;e.append("file",W[0].files[0]),le.thumbnailName=W[0].files[0].name,le.thumbnailURL=e,x()})),Z.on("change",(function(){let e=new FormData;e.append("file",Z[0].files[0]),le.promoVideoName=Z[0].files[0].name,le.promoVideoURL=e,B()})),ie.on("click",(function(){L(!1)})),re.on("click",(function(){L(!0)})),te.on("click",(function(){if(le.sections.length>=20)return;let e=oe.value;if(e.length<1)return;let t={title:"",lectures:[]};t.title=e,le.sections.push(t),R()})),ne.on("click",(function(){if(le.sections[se].lectures.length>20)return;let e=ae.value;if(e.length<1)return;let t={title:"",article:new FormData,articleName:"",description:"",locked:!0,uiCollapsed:!1};t.title=e,console.log(se),le.sections[se].lectures.push(t),R()})),function(){try{if(isNaN(Q.attr("data-course-id"))||(le.id=Q.attr("data-course-id")),le.id>0){let e={url:"/stoody/api/v1/course/findCourseWithDetails/"+le.id,method:"GET",timeout:0};$.ajax(e).done((function(e){try{le=e.response,isNaN(Q.attr("data-course-id"))||(le.id=Q.attr("data-course-id")),$("#loadingForm").hide(),$("#courseForm").show(),$("#courseFormHeader").show(),E(),console.log(e.response),console.log(e.responseStatus)}catch(e){$("#loadingForm").hide(),$("#courseForm").show(),$("#courseFormHeader").show(),console.log(e),le={congratulationsMessage:"",contextTags:"",courseCategoryId:0,courseStatus:0,currency:"",description:"",discount:"",languageCode:"",level:0,price:0,promoVideoName:"",promoVideoURL:"",sections:[],tags:"",thumbnailName:"",thumbnailURL:"",title:"",welcomeMessage:""},E()}}))}else $("#loadingForm").hide(),$("#courseForm").show(),$("#courseFormHeader").show()}catch(e){$("#loadingForm").hide(),$("#courseForm").show(),$("#courseFormHeader").show(),le={congratulationsMessage:"",contextTags:"",courseCategoryId:0,courseStatus:0,currency:"",description:"",discount:"",languageCode:"",level:0,price:0,promoVideoName:"",promoVideoURL:"",sections:[],tags:"",thumbnailName:"",thumbnailURL:"",title:"",welcomeMessage:""},E(),console.log(e)}}()}}();
"use strict";!function(){var i=window.location+"",t=i.replace(window.location.protocol+"//"+window.location.host+"/","");$("ul#sidebarnav a").filter((function(){return this.href===i||this.href===t})).parentsUntil(".sidebar-nav").each((function(i){$(this).is("li")&&0!==$(this).children("a").length?($(this).children("a").addClass("active"),$(this).parent("ul#sidebarnav").length,$(this).addClass("active")):$(this).is("ul")||0!==$(this).children("a").length?$(this).is("ul")&&$(this).addClass("in"):$(this).addClass("active")}))}();