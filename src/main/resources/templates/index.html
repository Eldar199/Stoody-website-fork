<html lang="en" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Stoody</title>
    <meta charset="UTF-8">
    <meta content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
          name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <link crossorigin="anonymous" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" rel="stylesheet">
    <link crossorigin="anonymous" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
          integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/video_card.css}">
    <link rel="stylesheet" th:href="@{/css/sidebar.css}">
</head>
<body style="background-color: #ebebeb">

<div class="container-fluid shadow mb-1 rounded"
     style="position: fixed; z-index: 1000; background-color:rgba(235, 235, 235, 0.98);">
    <div class="d-flex flex-wrap align-items-center justify-content-md-between p-1">
        <div class="col d-flex align-items-center col-md-auto">
            <img alt=th:src="" class="ms-2" th:src="@{/images/logo.png}" width="90">
            <h4 style="padding-top:10;">Stoody</h4>
        </div>

        <div class="col col-md-6 col-lg-5 d-none d-md-flex align-items-center pt-1 pb-1 justify-content-center">
            <div class="input-group">
                <input aria-describedby="search-addon" aria-label="Search" class="form-control rounded"
                       placeholder="Search"
                       type="search"/>
                <button class="btn btn-light" type="button">
                    Search
                </button>
            </div>
        </div>

        <ul class="nav col-md-auto">
            <li sec:authorize="!isAnonymous()">
                <a class="nav-link px-2" href=th:src="">
                    Create Course
                </a>
            </li>
            <li sec:authorize="!isAnonymous()">
                <a class="nav-link px-2" href=th:src="">
                    Notifications
                </a>
            </li>
            <br>
            <li>
                <!-- Login Button (if anonymous)-->
                <a class="nav-link" href="#" sec:authorize="!isAnonymous()" th:href="@{/login}">Become Teacher</a></li>
            <li>
                <!-- Login Button (if anonymous)-->
                <a class="nav-link" href="#" sec:authorize="isAnonymous()" th:href="@{/login}">Sign In</a>
            </li>
        </ul>
    </div>
</div>

<div class="sidebar" style="z-index:100">
    <ul class="nav nav-pills flex-column mb-auto" style="padding: 10px 15px;">
        <li class="nav-item" sec:authorize="!isAnonymous()" style="padding-top:10px;">
            <button class="btn btn-danger" style="width:100%" type="button">Subscribed</button>
        </li>

        <li class="nav-item" sec:authorize="!isAnonymous()" style="padding-top:10px;">
            <button class="btn btn-primary" style="width:100%" type="button">History</button>
        </li>

        <li class="nav-item" sec:authorize="!isAnonymous()" style="padding-top:10px;">
            <button class="btn btn-primary" style="width:100%" type="button">Watch Later</button>
        </li>

        <hr/>

        <li class="nav-item" style="padding-top:10px;" th:each="category, iStat : ${categories}">
            <button class="btn btn-light" style="width:100%" type="button"><span th:text="${category.name}"></span>
            </button>
        </li>
    </ul>
</div>

<div class="container" style="padding-top:100px; padding-left:15px; position: relative; z-index: 0;">
    <!--    <h2>Most Popular</h2>-->
    <div class="row" th:each="category, iStat : ${categories}">
        <div class="col-sm">
            <div class="row">
                <div class="videos">
                    <!-- a video starts -->
                    <div class="video" th:each="course, iStat : ${courses}"
                         th:if="${course.category.name == category.name}">
                        <h4 style="font-size:16px;"
                            th:text="${course.category.name}"></h4>

                        <div class="thumbnail">
                            <!--                            <img alt=th:src="" src="https://img.youtube.com/vi/zUwB_imVjmg/maxresdefault.jpg"/>-->
                            <td><img height="100px" th:if="${!#strings.isEmpty(course.imageName)}" th:src="@{${'/courseThumbnails/' + course.imageName}}"
                                     width="100px"></td>

                            <img alt=th:src="" class="ms-2" style="object-fit: contain;"
                                 th:if="${#strings.isEmpty(course.imageName)}" th:src="@{/images/logo_high.png}">
                        </div>

                        <div class="details">
                            <div class="author">
                                <img alt=th:src="" th:src="@{/images/logo.png}"/>
                            </div>
                            <div class="title">
                                <h3 th:text="${course.name}">
                                </h3>
                                <a href=th:src="" th:text="${course.ownerEmail}">
                                </a>
                                <span th:text="${course.viewCount}+' Views'"></span>
                                <span th:text="${#temporals.formatISO(course.uploadDate)}"></span>
                            </div>
                        </div>
                    </div>
                    <!-- a video Ends -->
                </div>
            </div>
        </div>
    </div>
</div>

</body>
</html>